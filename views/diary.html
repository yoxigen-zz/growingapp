<div class="flex-vertical flex-1 entries">
    <div ng-show="showFirstTimeSelection" ng-cloak class="flex-1 contents-empty-message">
        <div class="vertical-buttons-bar centered-buttons-block">
            <p class="vertical-buttons-text contents-empty-message-title">Welcome to GrowingApp!</p>
            <p class="vertical-buttons-text">Let's get started:</p>
            <a class="button save-button" ng-click="addNewPlayer()">
                <img src="images/icons/plus.svg" />
                <span class="button-text">Add child</span>
            </a>
            <p class="vertical-buttons-text">Already have a user?</p>
            <a class="button save-button" ng-click="dialogs.signIn.open()">
                <img src="images/icons/cloud_sync_white.svg" />
                <span class="button-text">Sign in</span>
            </a>
        </div>
    </div>
    <div class="contents-scroll flex-1"
         on-scroll-to-bottom="entries.loadMoreEntries()"
         done-scrolling="entries.allEntriesAdded"
         ng-class="{ 'flex-vertical': entries && !entries.items.length }"
         ng-show="player && !showFirstTimeSelection">
        <header class="contents-header flex-horizontal" ng-show="player && !showFirstTimeSelection">
            <div class="header-controls flex-1">
                <h2>Recent Activities</h2>
                <select class="fancy-select"
                        ng-model="entries.currentEntriesType"
                        ng-change="onEntriesTypeChange()"
                        ng-options="entryType as entryType.name for entryType in ::entryTypes">
                    <option value="">All entry types</option>
                </select>
            </div>
            <a id="new-entry-button" class="floating-action-button add-button" ng-show="entries.items.length" title="New entry" ng-click="dialogs.newEntry.toggle()"></a>
        </header>
        <div class="flex-1 contents-empty-message" ng-cloak ng-show="!entries.settingEntries && entries && !entries.items.length">
            <div>
                <p>No {{entries.currentEntriesType || ''}} entries added yet.</p>
                <a class="floating-action-button add-button" ng-click="dialogs.newEntry.toggle()"></a>
            </div>
        </div>
        <ul class="cards">
            <li ng-repeat="entry in entries.items" class="card">
                <div ng-include="'entry-' + entry.type.templateName"></div>
                <div ng-if="entry.description" class="card-text" is-rtl="entry.rtlDescription">{{entry.description}}</div>
                <div class="card-info flex-horizontal">
                    <div class="card-details flex-1">
                        {{::entry.dateText}} <span class="separator">|</span> {{::entry.ageText}}
                    </div>
                    <div class="card-buttons">
                        <a class="button card-{{ ::entry.type.insightIcon.id }}-button" ng-if="::entry.type.insight" ng-click="insights.setCurrentInsight(entry.type.insight)"></a>
                        <a class="button card-edit-button" ng-click="entries.editEntry(entry)"></a>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div class="floating-message" ng-show="dialogs.unremoveEntry.isOpen">
        <div class="floating-message-contents">
            <span class="floating-message-text"><span class="hide-smallest-width">Entry</span> Deleted</span>
            <a ng-click="entries.unremoveLastEntry()" id="undoEntryRemove"><img src="images/icons/undo.svg" /> Undo</a>
        </div>
    </div>
    <dialog show="dialogs.newEntry.isOpen" title="{{::dialogs.newEntry.title}}" on-show="onShowDialog($event)" on-hide="onHideDialog()">
        <ul class="entry-types-list">
            <li ng-repeat="entryType in ::entryTypes"
                ng-style="{ 'background-color': entryType.color }"
                ng-click="entries.newEntry(entryType)">
                <div class="entry-image">
                    <img ng-src="{{ ::entryType.icon.url }}" />
                </div>
                <span class="entry-type-name">{{ ::entryType.name }}</span>
            </li>
        </ul>
    </dialog>
    <slide-dialog show="dialogs.editEntry.isOpen"
           title="{{entries.editedEntry.isNew && 'New' || 'Edit'}} Entry: {{ entries.editedEntry.type.name }}"
           actions="dialogs.editEntry.actions"
           submit-action="dialogs.editEntry.submitAction"
           on-show="onShowDialog($event)"
           on-hide="onHideDialog()">
        <form ng-if="entries.editedEntry">
            <div ng-include="'entry_editor_' + entries.editedEntry.type.id"></div>
            <label ng-show="entries.editedEntry.type.allowDescription !== false">
                <span class="label-text">Additional Details</span>
                <textarea ng-model="entries.editedEntry.description"></textarea>
            </label>
            <label class="no-margin"><span class="label-text">Entry date</span><input type="date" ng-model="entries.editedEntry.date" /></label>
        </form>
    </slide-dialog>
</div>