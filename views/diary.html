<div class="flex-vertical">
    <header class="contents-header flex-horizontal">
        <div class="header-controls flex-1">
            Diary -
            <select class="fancy-select"
                    ng-model="currentEntriesType"
                    ng-change="onEntriesTypeChange()"
                    ng-options="entryType.id as entryType.name for entryType in entryTypes">
                <option value="">All entry types</option>
            </select>
        </div>
        <div>
            <a id="newEntryButton" ng-click="toggleNewEntriesSelection()" class="button text-button" ng-class="{ active: showNewEntriesSelection }" title="New Entry">
                <img src="images/icons/plus-black.svg" />
            </a>
        </div>
    </header>
    <div class="contents-scroll flex-1" ng-class="{ 'flex-vertical': entries && !entries.length }">
        <div id="contents-empty-message" class="flex-1" ng-cloak ng-show="entries && !entries.length">
            <div>
                <p>No {{currentEntriesType || ''}} entries added yet.</p>
                <a class="button save-button" ng-click="toggleNewEntriesSelection()">Start adding</a>
            </div>
        </div>
        <ul class="items-list">
            <li ng-repeat="entry in entries" ng-click="entryClick(entry)">
                <img class="item-icon" ng-src="images/icons/{{entry.type.icon}}.svg" />
                <div class="item-text">
                    <div ng-bind-html="entry.html"></div>
                    <div class="item-details">{{entry.dateText}}</div>
                </div>
            </li>
        </ul>
    </div>
    <div id="newEntryTypesWrapper"
         class="entry-types-dialog-wrapper"
         self-click="toggleNewEntriesSelection()"
         ng-include="'views/new_entries_select.html'"
         data-toggle-display="showNewEntriesSelection"
         data-toggle-element="#newEntryType">
    </div>
    <div id="newEntry"
         class="popup-wrapper"
         ng-show="newEntryType"
         data-toggle-display="showEditEntry">
        <div class="popup flex-vertical">
            <div class="flex-vertical">
                <header>
                    <a class="close-button"
                       title="Close"
                       ng-click="showEditEntry = false">
                        <img src="images/icons/close.svg" />
                    </a>
                    <span class="popup-title">{{entry.isNewEntry && 'New' || 'Edit'}} Entry: {{ newEntryType.name }}</span>
                </header>
                <div class="flex-1 flex-vertical">
                    <div class="scroll-vertical">
                        <form>
                            <div class="popup-contents">
                                <form>
                                    <div ng-if="newEntryType" ng-include="'entry_editor_' + newEntryType.id"></div>
                                    <label class="no-margin"><span class="label-text">Entry date</span><input type="date" ng-model="entry.date" /></label>
                                </form>
                            </div>
                            <footer class="flex-horizontal buttons-bar">
                                <a ng-click="showEditEntry = false" ng-show="!entry._deleted" class="button cancel-button" style="width: 48%">Cancel</a>
                                <a class="button remove-button" ng-click="removeEntry(entry)" ng-show="!entry.isNewEntry && !entry._deleted">
                                    <img class="button-icon" src="images/icons/close.svg" />
                                    <span class="hide-smallest-width">Delete</span><span class="hide-small-width"> Entry</span></a>
                                <a class="button save-button" ng-click="saveEntry()" ng-show="!entry._deleted">
                                    <img class="button-icon" src="images/icons/ok.svg" />
                                    <span class="button-text">
                                        <span class="hide-smallest-width">Save</span>
                                        <span class="hide-small-width"> Entry</span>
                                    </span>
                                </a>
                                <a class="button" ng-show="entry._deleted" ng-click="unremoveEntry(entry)">
                                    <span class="button-text">Undo entry delete</span>
                                </a>
                            </footer>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>